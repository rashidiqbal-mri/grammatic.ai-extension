(()=>{function e(){const e=document.activeElement;if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){const t=e.value.substring(e.selectionStart,e.selectionEnd);t&&chrome.runtime.sendMessage({type:"selectedText",text:t})}}function t(){const e=document.activeElement;if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){const t=e.value;t&&chrome.runtime.sendMessage({type:"textboxText",text:t})}}document.querySelectorAll("input[type='text'], textarea").forEach((e=>{let t=document.createElement("div");t.style.position="relative",t.style.display="inline-block",e.before(t),t.appendChild(e);let n=document.createElement("button");n.innerText="RI",n.style.backgroundColor="teal",n.style.position="absolute",n.style.borderRadius="100%",n.style.padding="0.5em",n.style.border="none",n.style.color="#fff",n.style.bottom="2px",n.style.right="2px",t.appendChild(n),console.log(n),console.log("addButtonToTextBoxes function is being executed!"),n.addEventListener("click",(e=>{e.preventDefault();const t=n.getBoundingClientRect();let o={type:"toggle_menu",coordinates:{x:t.x+window.scrollX,y:t.y+window.scrollY}};chrome.runtime.sendMessage(o)})),e.addEventListener("focus",(()=>{n.style.display="inline-block"}))})),document.addEventListener("mouseup",e),document.addEventListener("keyup",e),document.addEventListener("mouseup",t),document.addEventListener("keyup",t)})();